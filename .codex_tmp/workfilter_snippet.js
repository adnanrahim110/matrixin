extends Component{constructor(ee){super(ee),this.input=this.el.querySelector("#work-filter"),this.select=this.el.querySelector(".work-filter-select-text"),this.optionsWrapper=this.el.querySelector(".work-filter-options"),this.options=this.el.querySelectorAll(".work-filter-btn"),this.close=this.el.querySelector(".work-filter-select-close"),this.current="all",this.active=!1,this.filtered=!1}init(){super.init(),Site.isMobile||(this.getBounds(),this.border=this.initComponent(Border,{el:this.el.querySelector(".work-filter-border"),debug:!0}),this.activeBorder=this.initComponent(Border,{el:this.el.querySelector(".work-filter-border-active"),debug:!0}),gsapWithCSS.set(this.activeBorder.el,{width:this.borderBounds.width,height:this.borderBounds.height,visibility:"hidden"})),splitHover(this.select),this.selectTexts=this.select.querySelectorAll(".line"),this.options.forEach(ee=>{const ie=ee.getAttribute("data-value"),re=ee.getAttribute("data-title");splitHover(ee),this.addListener({el:ee,event:"click",handler:()=>{this.current!==ie&&(this.currentWidth=ee.offsetWidth,this.input.value=ie,this.input.dispatchEvent(new Event("change",{bubbles:!0})),this.current=ie,this.selectTexts.forEach(se=>se.textContent=re),ie==="all"?(this.filtered=!1,this.el.classList.remove("filtered")):(this.filtered=!0,this.el.classList.add("filtered")),this.toggle())}})}),this.addListener({el:this.select,event:"click",handler:()=>{this.toggle()}}),this.addListener({el:this.close,event:"click",handler:()=>{if(this.active){this.toggle();return}this.filtered&&(this.filtered=!1,this.el.classList.remove("filtered"),this.input.value="all",this.input.dispatchEvent(new Event("change",{bubbles:!0})),this.current="all",this.selectTexts.forEach(ee=>ee.textContent="Work filter"))}}),this.addListener({el:document,event:"click",handler:ee=>{if(!this.active)return;const ie=ee.target;this.el&&!this.el.contains(ie)&&this.toggle()}}),this.inTl=gsapWithCSS.timeline({paused:!0,defaults:{overwrite:"auto"}}),Site.isMobile||(this.inTl.set(this.border.el,{visibility:"hidden"}),this.inTl.set(this.activeBorder.el,{visibility:"visible"})),this.inTl.to(this.el,{width:"23.5rem",height:"auto",duration:.6,ease:"power3.out"},0),this.outTl=gsapWithCSS.timeline({paused:!0,defaults:{overwrite:"auto"}}),this.outTl.to(this.el,{width:"auto",height:"4rem",duration:.3,ease:"power3.out"}),Site.isMobile||(this.outTl.set(this.activeBorder.el,{visibility:"hidden"}),this.outTl.set(this.border.el,{visibility:"visible"}))}getBounds(){this.borderBounds={width:remToPx(23.5),height:remToPx(4)+this.optionsWrapper.offsetHeight},this.activeBorder&&(gsapWithCSS.set(this.activeBorder.el,{width:this.borderBounds.width,height:this.borderBounds.height}),this.activeBorder.resize())}toggle(){this.active=!this.active,this.active?(this.el.classList.add("active"),this.outTl?.pause(),this.outTl?.invalidate(),this.inTl?.invalidate(),requestAnimationFrame(()=>{this.inTl?.restart()})):(this.el.classList.remove("active"),this.inTl?.pause(),this.inTl?.invalidate(),this.outTl?.invalidate(),requestAnimationFrame(()=>{this.outTl?.restart()}))}resize(){super.resize(),this.getBounds()}}
