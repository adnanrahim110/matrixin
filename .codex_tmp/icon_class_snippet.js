class Icon extends Component{constructor(ee){super(ee),this.length=6,this.index=0,this.totalFrames=0,this.frame=0}init(){super.init(),this.lottie=lottie.loadAnimation({container:this.el,renderer:"svg",loop:!1,autoplay:!1,path:"/icon.json"}),this.addListener({el:this.lottie,event:"data_ready",handler:()=>{this.totalFrames=this.lottie.totalFrames,this.frame=this.totalFrames/this.length,this.resolveReady()}})}destroy(){super.destroy(),this.lottie.destroy()}}class Loader extends Component{constructor(ee){super(ee)}async init(){super.init(),this.width=Site.width,this.height=Site.height,this.offsetWidth=remToPx(3),this.offsetHeight=remToPx(3.1),this.xWidth=(this.width*.5-this.offsetWidth)/2,this.yHeight=(this.height*.5-this.offsetHeight)/2,this.numberHeight=remToPx(3.8),this.iconEl=this.el.querySelector(".loader-icon"),this.icon=await this.initComponent(Icon,{el:this.iconEl}),this.progressTop=this.el.querySelector(".loader-progress-top"),this.progressBottom=this.el.querySelector(".loader-progress-bottom"),this.progressNumbers=this.el.querySelectorAll(".loader-numbers"),await this.icon.ready,this.playhead={frame:this.icon.lottie.currentFrame},gsapWithCSS.fromTo(this.iconEl,{autoAlpha:0,scale:2.4,filter:"blur(1rem)"},{scale:1.8,autoAlpha:1,filter:"blur(0rem)",duration:1,ease:"inOut"}),this.tl=gsapWithCSS.timeline({paused:!0,defaults:{ease:"inOut",duration:1},onComplete:()=>{this.resolveReady()}}),this.tl.to(this.playhead,{frame:this.icon.frame,onUpdate:()=>{this.icon.lottie.goToAndStop(this.playhead.frame,!0)}},"1"),this.tl.to(this.playhead,{frame:this.icon.frame*2,onUpdate:()=>{this.icon.lottie.goToAndStop(this.playhead.frame,!0)}},"2"),this.tl.to(this.playhead,{frame:this.icon.frame*1,onUpdate:()=>{this.icon.lottie.goToAndStop(this.playhead.frame,!0)}},"3"),this.tl.to(this.playhead,{frame:0,onUpdate:()=>{this.icon.lottie.goToAndStop(this.playhead.frame,!0)}},"4");for(let ee=1;ee<=4;ee++)ee>2?(this.tl.to(this.progressTop,{y:this.yHeight*(ee-2)},`${ee}`),this.tl.to(this.progressBottom,{y:-(this.yHeight*(ee-2))},`${ee}`)):(this.tl.to(this.progressTop,{x:-(this.xWidth*ee)},`${ee}`),this.tl.to(this.progressBottom,{x:this.xWidth*ee},`${ee}`)),this.tl.to(this.progressNumbers,{y:-((this.numberHeight+remToPx(.8))*ee),ease:"inOut"},`${ee}`);this.batches=await fetch("/api/loader.json").then(ee=>ee.json()),this.batchPromises=Array.from({length:6},(ee,ie)=>this.loadBatch(ie)),await this.runPhases(5)}async runPhases(ee){for(let ie=0;ie<ee;ie++){this.seg?.kill();const re=new Promise(ne=>{this.seg=this.tl.tweenFromTo(String(ie),String(ie+1)),this.seg.eventCallback("onComplete",ne)}),se=this.batchPromises[ie]??Promise.resolve();await Promise.all([re,se])}}loadBatch(ee){const ie=this.batches[ee];return ie?ie.urls?this.preloadUrls(ie.urls):ie.media?this.preloadMedia(ie.media):Promise.resolve():Promise.resolve()}preloadMedia(ee=[]){return Promise.all(ee.map(ie=>ie?.type==="video"?this.preloadVideo(ie.url):this.preloadImage(ie.url,ie.width,ie.height)))}preloadImage(ee,ie,re){return new Promise(se=>{if(!ee)return se();const ne=Number(ie)||void 0,oe=Number(re)||void 0,ae=buildUrl(ee,ne,oe),le=new Image;le.decoding="async",le.fetchPriority="high",le.src=ae;const he=()=>se();le.decode?.().then(he).catch(()=>{if(le.complete)return he();le.onload=he,le.onerror=he})})}preloadVideo(ee){return new Promise(ie=>{if(!ee||typeof ee!="string"){ie();return}const re=document.createElement("video");re.preload="auto",re.src=ee,re.muted=!0,re.playsInline=!0;const se=()=>{oe(),ie()},ne=()=>{oe(),ie()},oe=()=>{re.removeEventListener("canplaythrough",se),re.removeEventListener("error",ne)};re.addEventListener("canplaythrough",se,{once:!0}),re.addEventListener("error",ne,{once:!0})})}preloadUrls(ee=[]){return Promise.all(ee.map(ie=>this.warmFetch(ie)))}warmFetch(ee){return fetch(ee,{cache:"force-cache"}).catch(()=>{})}destroy(){super.destroy()}}class Border extends Component{constructor(ee){super(ee),!Site.isMobile&&(this.active=!0,this.color=ee.color??"215, 150, 255",this.el.classList.add("border"),this.fixed=ee.fixed??!1,this.canvas=document.createElement("canvas"),this.canvas.classList.add("border-canvas"),this.el.appendChild(this.canvas),ee.inner&&(this.inner=document.createElement("div"),this.inner.classList.add("border-inner"),this.el.appendChild(this.inner)),this.ctx=this.canvas.getContext("2d"),this.size=ee.size?ee.size:100,this.radius=ee.radius?remToPx(ee.radius):remToPx(.2),this.ease=.1,this.mouse={x:0,y:0},this.debug=ee.debug)}init(){super.init(),!Site.isMobile&&this.getBounds()}getBounds(ee=!0){requestAnimationFrame(()=>{!this.active||!this.el||(this.bounds=this.el.getBoundingClientRect(),this.bounds.scroll=Site.lenis.scroll,ee&&(this.canvas.width=this.bounds.width,this.canvas.height=this.bounds.height))})}resize(){super.resize(),this.getBounds()}loop(ee){if(super.loop(ee),!this.ctx||!this.bounds||!this.active||Site.isMobile)return;if(!Site.windowActive){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);return}const ie=1e3,re=this.bounds,se=Site.mouse.x,ne=Site.mouse.y,oe=re.scroll,ae=re.left,le=re.right,he=this.fixed?re.bottom:re.bottom+oe-Site.lenis.scroll;let ce=this.fixed?re.top:re.top+oe-Site.lenis.scroll;const me=se>ae-ie&&se<le+ie,ue=ne>ce-ie&&ne<he+ie;if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!(me&&ue))return;this.mouse.x+=(se-ae-this.mouse.x)*this.ease,this.mouse.y+=(ne-ce-this.mouse.y)*this.ease;const pe=this.ctx.createRadialGradient(this.mouse.x,this.mouse.y,0,this.mouse.x,this.mouse.y,this.size);pe.addColorStop(0,`rgba(${this.color}, 1)`),pe.addColorStop(1,`rgba(${this.color}, 0)`),this.ctx.fillStyle=pe,this.ctx.beginPath(),this.ctx.roundRect(0,0,this.canvas.width,this.canvas.height,this.radius),this.ctx.roundRect(1,1,this.canvas.width-2,this.canvas.height-2,this.radius-1),this.ctx.fill("evenodd")}destroy(){super.destroy(),this.ctx=null,this.canvas=null}}class Nav extends Component{constructor(ee){super(ee),this.full=!0,this.scrolled=!1,this.hidden=!1,this.width="32.4rem",this.height=this.e
